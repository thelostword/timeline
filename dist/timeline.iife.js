var $timeline=function(S){"use strict";var Kt=Object.defineProperty;var te=(S,L,E)=>L in S?Kt(S,L,{enumerable:!0,configurable:!0,writable:!0,value:E}):S[L]=E;var dt=(S,L,E)=>(te(S,typeof L!="symbol"?L+"":L,E),E),Ht=(S,L,E)=>{if(!L.has(S))throw TypeError("Cannot "+E)};var o=(S,L,E)=>(Ht(S,L,"read from private field"),E?E.call(S):L.get(S)),_=(S,L,E)=>{if(L.has(S))throw TypeError("Cannot add the same private member more than once");L instanceof WeakSet?L.add(S):L.set(S,E)},W=(S,L,E,at)=>(Ht(S,L,"write to private field"),at?at.call(S,E):L.set(S,E),E);var B=(S,L,E)=>(Ht(S,L,"access private method"),E);var ut,K,ot,X,J,z,it,V,tt,Q,vt,Wt,pt,Pt,Mt,kt,Tt,It,Dt,Ut,xt,Xt,yt,At,St,Zt,Yt,ft,ht,st,$t;function L(g){return{all:g=g||new Map,on:function(t,i){var a=g.get(t);a?a.push(i):g.set(t,[i])},off:function(t,i){var a=g.get(t);a&&(i?a.splice(a.indexOf(i)>>>0,1):g.set(t,[]))},emit:function(t,i){var a=g.get(t);a&&a.slice().map(function(f){f(i)}),(a=g.get("*"))&&a.slice().map(function(f){f(t,i)})}}}var E=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function at(g){return g&&g.__esModule&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g}var Ft={exports:{}};(function(g,t){(function(i,a){g.exports=a()})(E,function(){var i=1e3,a=6e4,f=36e5,p="millisecond",l="second",m="minute",c="hour",O="day",Y="week",M="month",T="quarter",D="year",y="date",r="Invalid Date",x=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,k=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,w={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(u){var n=["th","st","nd","rd"],e=u%100;return"["+u+(n[(e-20)%10]||n[e]||n[0])+"]"}},C=function(u,n,e){var h=String(u);return!h||h.length>=n?u:""+Array(n+1-h.length).join(e)+u},j={s:C,z:function(u){var n=-u.utcOffset(),e=Math.abs(n),h=Math.floor(e/60),s=e%60;return(n<=0?"+":"-")+C(h,2,"0")+":"+C(s,2,"0")},m:function u(n,e){if(n.date()<e.date())return-u(e,n);var h=12*(e.year()-n.year())+(e.month()-n.month()),s=n.clone().add(h,M),d=e-s<0,$=n.clone().add(h+(d?-1:1),M);return+(-(h+(e-s)/(d?s-$:$-s))||0)},a:function(u){return u<0?Math.ceil(u)||0:Math.floor(u)},p:function(u){return{M,y:D,w:Y,d:O,D:y,h:c,m,s:l,ms:p,Q:T}[u]||String(u||"").toLowerCase().replace(/s$/,"")},u:function(u){return u===void 0}},H="en",I={};I[H]=w;var A="$isDayjsObject",G=function(u){return u instanceof wt||!(!u||!u[A])},R=function u(n,e,h){var s;if(!n)return H;if(typeof n=="string"){var d=n.toLowerCase();I[d]&&(s=d),e&&(I[d]=e,s=d);var $=n.split("-");if(!s&&$.length>1)return u($[0])}else{var b=n.name;I[b]=n,s=b}return!h&&s&&(H=s),s||!h&&H},F=function(u,n){if(G(u))return u.clone();var e=typeof n=="object"?n:{};return e.date=u,e.args=arguments,new wt(e)},v=j;v.l=R,v.i=G,v.w=function(u,n){return F(u,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var wt=function(){function u(e){this.$L=R(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[A]=!0}var n=u.prototype;return n.parse=function(e){this.$d=function(h){var s=h.date,d=h.utc;if(s===null)return new Date(NaN);if(v.u(s))return new Date;if(s instanceof Date)return new Date(s);if(typeof s=="string"&&!/Z$/i.test(s)){var $=s.match(x);if($){var b=$[2]-1||0,P=($[7]||"0").substring(0,3);return d?new Date(Date.UTC($[1],b,$[3]||1,$[4]||0,$[5]||0,$[6]||0,P)):new Date($[1],b,$[3]||1,$[4]||0,$[5]||0,$[6]||0,P)}}return new Date(s)}(e),this.init()},n.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},n.$utils=function(){return v},n.isValid=function(){return this.$d.toString()!==r},n.isSame=function(e,h){var s=F(e);return this.startOf(h)<=s&&s<=this.endOf(h)},n.isAfter=function(e,h){return F(e)<this.startOf(h)},n.isBefore=function(e,h){return this.endOf(h)<F(e)},n.$g=function(e,h,s){return v.u(e)?this[h]:this.set(s,e)},n.unix=function(){return Math.floor(this.valueOf()/1e3)},n.valueOf=function(){return this.$d.getTime()},n.startOf=function(e,h){var s=this,d=!!v.u(h)||h,$=v.p(e),b=function(rt,N){var et=v.w(s.$u?Date.UTC(s.$y,N,rt):new Date(s.$y,N,rt),s);return d?et:et.endOf(O)},P=function(rt,N){return v.w(s.toDate()[rt].apply(s.toDate("s"),(d?[0,0,0,0]:[23,59,59,999]).slice(N)),s)},U=this.$W,Z=this.$M,q=this.$D,ct="set"+(this.$u?"UTC":"");switch($){case D:return d?b(1,0):b(31,11);case M:return d?b(1,Z):b(0,Z+1);case Y:var nt=this.$locale().weekStart||0,lt=(U<nt?U+7:U)-nt;return b(d?q-lt:q+(6-lt),Z);case O:case y:return P(ct+"Hours",0);case c:return P(ct+"Minutes",1);case m:return P(ct+"Seconds",2);case l:return P(ct+"Milliseconds",3);default:return this.clone()}},n.endOf=function(e){return this.startOf(e,!1)},n.$set=function(e,h){var s,d=v.p(e),$="set"+(this.$u?"UTC":""),b=(s={},s[O]=$+"Date",s[y]=$+"Date",s[M]=$+"Month",s[D]=$+"FullYear",s[c]=$+"Hours",s[m]=$+"Minutes",s[l]=$+"Seconds",s[p]=$+"Milliseconds",s)[d],P=d===O?this.$D+(h-this.$W):h;if(d===M||d===D){var U=this.clone().set(y,1);U.$d[b](P),U.init(),this.$d=U.set(y,Math.min(this.$D,U.daysInMonth())).$d}else b&&this.$d[b](P);return this.init(),this},n.set=function(e,h){return this.clone().$set(e,h)},n.get=function(e){return this[v.p(e)]()},n.add=function(e,h){var s,d=this;e=Number(e);var $=v.p(h),b=function(Z){var q=F(d);return v.w(q.date(q.date()+Math.round(Z*e)),d)};if($===M)return this.set(M,this.$M+e);if($===D)return this.set(D,this.$y+e);if($===O)return b(1);if($===Y)return b(7);var P=(s={},s[m]=a,s[c]=f,s[l]=i,s)[$]||1,U=this.$d.getTime()+e*P;return v.w(U,this)},n.subtract=function(e,h){return this.add(-1*e,h)},n.format=function(e){var h=this,s=this.$locale();if(!this.isValid())return s.invalidDate||r;var d=e||"YYYY-MM-DDTHH:mm:ssZ",$=v.z(this),b=this.$H,P=this.$m,U=this.$M,Z=s.weekdays,q=s.months,ct=s.meridiem,nt=function(N,et,mt,bt){return N&&(N[et]||N(h,d))||mt[et].slice(0,bt)},lt=function(N){return v.s(b%12||12,N,"0")},rt=ct||function(N,et,mt){var bt=N<12?"AM":"PM";return mt?bt.toLowerCase():bt};return d.replace(k,function(N,et){return et||function(mt){switch(mt){case"YY":return String(h.$y).slice(-2);case"YYYY":return v.s(h.$y,4,"0");case"M":return U+1;case"MM":return v.s(U+1,2,"0");case"MMM":return nt(s.monthsShort,U,q,3);case"MMMM":return nt(q,U);case"D":return h.$D;case"DD":return v.s(h.$D,2,"0");case"d":return String(h.$W);case"dd":return nt(s.weekdaysMin,h.$W,Z,2);case"ddd":return nt(s.weekdaysShort,h.$W,Z,3);case"dddd":return Z[h.$W];case"H":return String(b);case"HH":return v.s(b,2,"0");case"h":return lt(1);case"hh":return lt(2);case"a":return rt(b,P,!0);case"A":return rt(b,P,!1);case"m":return String(P);case"mm":return v.s(P,2,"0");case"s":return String(h.$s);case"ss":return v.s(h.$s,2,"0");case"SSS":return v.s(h.$ms,3,"0");case"Z":return $}return null}(N)||$.replace(":","")})},n.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},n.diff=function(e,h,s){var d,$=this,b=v.p(h),P=F(e),U=(P.utcOffset()-this.utcOffset())*a,Z=this-P,q=function(){return v.m($,P)};switch(b){case D:d=q()/12;break;case M:d=q();break;case T:d=q()/3;break;case Y:d=(Z-U)/6048e5;break;case O:d=(Z-U)/864e5;break;case c:d=Z/f;break;case m:d=Z/a;break;case l:d=Z/i;break;default:d=Z}return s?d:v.a(d)},n.daysInMonth=function(){return this.endOf(M).$D},n.$locale=function(){return I[this.$L]},n.locale=function(e,h){if(!e)return this.$L;var s=this.clone(),d=R(e,h,!0);return d&&(s.$L=d),s},n.clone=function(){return v.w(this.$d,this)},n.toDate=function(){return new Date(this.valueOf())},n.toJSON=function(){return this.isValid()?this.toISOString():null},n.toISOString=function(){return this.$d.toISOString()},n.toString=function(){return this.$d.toUTCString()},u}(),Et=wt.prototype;return F.prototype=Et,[["$ms",p],["$s",l],["$m",m],["$H",c],["$W",O],["$M",M],["$y",D],["$D",y]].forEach(function(u){Et[u[1]]=function(n){return this.$g(n,u[0],u[1])}}),F.extend=function(u,n){return u.$i||(u(n,wt,F),u.$i=!0),F},F.locale=R,F.isDayjs=G,F.unix=function(u){return F(1e3*u)},F.en=I[H],F.Ls=I,F.p={},F})})(Ft);var jt=Ft.exports;const Ot=at(jt);var Lt={exports:{}};(function(g,t){(function(i,a){g.exports=a()})(E,function(){var i="minute",a=/[+-]\d\d(?::?\d\d)?/g,f=/([+-]|\d\d)/g;return function(p,l,m){var c=l.prototype;m.utc=function(r){var x={date:r,utc:!0,args:arguments};return new l(x)},c.utc=function(r){var x=m(this.toDate(),{locale:this.$L,utc:!0});return r?x.add(this.utcOffset(),i):x},c.local=function(){return m(this.toDate(),{locale:this.$L,utc:!1})};var O=c.parse;c.parse=function(r){r.utc&&(this.$u=!0),this.$utils().u(r.$offset)||(this.$offset=r.$offset),O.call(this,r)};var Y=c.init;c.init=function(){if(this.$u){var r=this.$d;this.$y=r.getUTCFullYear(),this.$M=r.getUTCMonth(),this.$D=r.getUTCDate(),this.$W=r.getUTCDay(),this.$H=r.getUTCHours(),this.$m=r.getUTCMinutes(),this.$s=r.getUTCSeconds(),this.$ms=r.getUTCMilliseconds()}else Y.call(this)};var M=c.utcOffset;c.utcOffset=function(r,x){var k=this.$utils().u;if(k(r))return this.$u?0:k(this.$offset)?M.call(this):this.$offset;if(typeof r=="string"&&(r=function(H){H===void 0&&(H="");var I=H.match(a);if(!I)return null;var A=(""+I[0]).match(f)||["-",0,0],G=A[0],R=60*+A[1]+ +A[2];return R===0?0:G==="+"?R:-R}(r),r===null))return this;var w=Math.abs(r)<=16?60*r:r,C=this;if(x)return C.$offset=w,C.$u=r===0,C;if(r!==0){var j=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(C=this.local().add(w+j,i)).$offset=w,C.$x.$localOffset=j}else C=this.utc();return C};var T=c.format;c.format=function(r){var x=r||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return T.call(this,x)},c.valueOf=function(){var r=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*r},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var D=c.toDate;c.toDate=function(r){return r==="s"&&this.$offset?m(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():D.call(this)};var y=c.diff;c.diff=function(r,x,k){if(r&&this.$u===r.$u)return y.call(this,r,x,k);var w=this.local(),C=m(r).local();return y.call(w,C,x,k)}}})})(Lt);var Nt=Lt.exports;const Rt=at(Nt);var zt={exports:{}};(function(g,t){(function(i,a){g.exports=a()})(E,function(){var i={year:0,month:1,day:2,hour:3,minute:4,second:5},a={};return function(f,p,l){var m,c=function(T,D,y){y===void 0&&(y={});var r=new Date(T),x=function(k,w){w===void 0&&(w={});var C=w.timeZoneName||"short",j=k+"|"+C,H=a[j];return H||(H=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:k,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:C}),a[j]=H),H}(D,y);return x.formatToParts(r)},O=function(T,D){for(var y=c(T,D),r=[],x=0;x<y.length;x+=1){var k=y[x],w=k.type,C=k.value,j=i[w];j>=0&&(r[j]=parseInt(C,10))}var H=r[3],I=H===24?0:H,A=r[0]+"-"+r[1]+"-"+r[2]+" "+I+":"+r[4]+":"+r[5]+":000",G=+T;return(l.utc(A).valueOf()-(G-=G%1e3))/6e4},Y=p.prototype;Y.tz=function(T,D){T===void 0&&(T=m);var y=this.utcOffset(),r=this.toDate(),x=r.toLocaleString("en-US",{timeZone:T}),k=Math.round((r-new Date(x))/1e3/60),w=l(x,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(r.getTimezoneOffset()/15)-k,!0);if(D){var C=w.utcOffset();w=w.add(y-C,"minute")}return w.$x.$timezone=T,w},Y.offsetName=function(T){var D=this.$x.$timezone||l.tz.guess(),y=c(this.valueOf(),D,{timeZoneName:T}).find(function(r){return r.type.toLowerCase()==="timezonename"});return y&&y.value};var M=Y.startOf;Y.startOf=function(T,D){if(!this.$x||!this.$x.$timezone)return M.call(this,T,D);var y=l(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return M.call(y,T,D).tz(this.$x.$timezone,!0)},l.tz=function(T,D,y){var r=y&&D,x=y||D||m,k=O(+l(),x);if(typeof T!="string")return l(T).tz(x);var w=function(I,A,G){var R=I-60*A*1e3,F=O(R,G);if(A===F)return[R,A];var v=O(R-=60*(F-A)*1e3,G);return F===v?[R,F]:[I-60*Math.min(F,v)*1e3,Math.max(F,v)]}(l.utc(T,r).valueOf(),k,x),C=w[0],j=w[1],H=l(C).utcOffset(j);return H.$x.$timezone=x,H},l.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},l.tz.setDefault=function(T){m=T}}})})(zt);var Bt=zt.exports;const qt=at(Bt);Ot.extend(Rt),Ot.extend(qt);const gt=(g,t="MM/DD HH:mm Z",i)=>Ot(g).tz(i).format(t),Ct=(g,t)=>{let i,a=0;return(...f)=>{const p=Date.now(),l=p-a;!a||l>=t?(a=p,g.apply(void 0,f)):i||(i=setTimeout(()=>{a=p,g.apply(void 0,f),i=null},t-l))}},_t=g=>{const[t,i]=[g[0],g[1]],a=i.clientX-t.clientX,f=i.clientY-t.clientY;return Math.sqrt(a*a+f*f)},Jt=(g,t)=>{const i=document.createElement("canvas");i.width=i.height=1;const a=i.getContext("2d");a.fillStyle=g,a.fillRect(0,0,1,1);const f=a.getImageData(0,0,1,1).data;return`rgba(${f[0]}, ${f[1]}, ${f[2]}, ${t})`},Vt=({xCenterPoint:g,cfg:t,timePerPixel:i,timeSpacing:a,currentTime:f,$canvas:p,screenScaleCount:l,scaleHeight:m,startTime:c,drawLine:O,drawText:Y,drawArea:M})=>{const T=({space:y,scaleTimeFormat:r,bgTimeFormat:x,pointerTimeFormat:k,timezone:w})=>{Y({x:p.width-g/10,y:6,text:gt(f,x,w),fontSize:`${p.height-5}px`,align:"right",baseLine:"top",color:t.bgTextColor});const C=c%a,j=C/i;for(let H=0;H<l;H++){const I=H*t.scaleSpacing-j-t.pointerWidth/2,A=c+H*a-C;if(A%(a*y)===0){O({x:I,y:m.long}),Y({x:I,y:p.height-m.long-5,text:gt(A,r,w),baseLine:"bottom"});continue}O({x:I,y:m.short})}O({x:g-t.pointerWidth/2,y:p.height,width:t.pointerWidth,color:t.pointerColor}),M({startX:g-t.pointerDisplayWidth/2,startY:4,endX:g+t.pointerDisplayWidth/2,endY:4+t.pointerDisplayHeight,bgColor:t.pointerColor}),Y({x:g,y:t.pointerDisplayHeight/2+5,text:gt(f,k,w),align:"center",baseLine:"middle"})},D=t.thresholdsConfig[a];D&&T({space:D.space,scaleTimeFormat:D.scaleTimeFormat,bgTimeFormat:D.bgTimeFormat,pointerTimeFormat:D.pointerTimeFormat,timezone:t.timezone})},Gt={fill:!0,width:1e3,height:60,bgColor:"rgba(0,0,0,0.5)",textColor:"#ffffff",fontFamily:"Arial",scaleColor:"#ffffff",scaleSpacing:7,areaBgColor:"#ffffff55",pointerColor:"#00aeec",pointerWidth:3,pointerDisplayWidth:100,pointerDisplayHeight:14,fps:60,zoom:3,timeSpacingList:[10,100,1e3,1e4,6e4,6e5,36e5,864e5,6048e5],minimumTime:-1/0,maximumTime:1/0,thresholdsConfig:{10:{scaleTimeFormat:"mm:ss:SSS",bgTimeFormat:"YYYY/MM/DD",pointerTimeFormat:"HH:mm:ss:SSS",space:10},100:{scaleTimeFormat:"mm:ss",bgTimeFormat:"YYYY/MM/DD",pointerTimeFormat:"HH:mm:ss:SSS",space:10},1e3:{scaleTimeFormat:"mm:ss",bgTimeFormat:"YYYY/MM/DD",pointerTimeFormat:"HH:mm:ss",space:10},1e4:{scaleTimeFormat:"HH:mm:ss",bgTimeFormat:"YYYY/MM/DD",pointerTimeFormat:"HH:mm:ss",space:12},6e4:{scaleTimeFormat:"HH:mm",bgTimeFormat:"YYYY/MM/DD",pointerTimeFormat:"HH:mm:ss",space:10},6e5:{scaleTimeFormat:"HH:mm",bgTimeFormat:"YYYY/MM/DD",pointerTimeFormat:"HH:mm:ss",space:10},36e5:{scaleTimeFormat:"MM/DD HH:mm",bgTimeFormat:"YYYY/MM",pointerTimeFormat:"MM/DD HH:mm",space:12},864e5:{scaleTimeFormat:"MM/DD HH:mm",bgTimeFormat:"YYYY/MM",pointerTimeFormat:"YYYY/MM/DD HH:mm",space:12},6048e5:{scaleTimeFormat:"YYYY/MM/DD",bgTimeFormat:"YYYY",pointerTimeFormat:"YYYY/MM/DD",space:10}}};class Qt{constructor(t,i){_(this,vt);_(this,pt);_(this,Mt);_(this,Tt);_(this,Dt);_(this,xt);_(this,yt);_(this,St);_(this,st);dt(this,"$canvas");dt(this,"$canvasParent");dt(this,"ctx");dt(this,"cfg");_(this,ut,void 0);_(this,K,void 0);_(this,ot,L());_(this,X,0);_(this,J,void 0);_(this,z,void 0);_(this,it,void 0);_(this,V,!1);_(this,tt,null);_(this,Q,null);_(this,Yt,({x:t,y:i,width:a=1,color:f=this.cfg.scaleColor})=>{this.ctx.beginPath(),this.ctx.moveTo(t,this.$canvas.height),this.ctx.lineTo(t,this.$canvas.height-i),this.ctx.closePath(),this.ctx.strokeStyle=f,this.ctx.lineWidth=a,this.ctx.stroke()});_(this,ft,({x:t,y:i,text:a,color:f=this.cfg.textColor,fontSize:p="11px",align:l="center",baseLine:m="alphabetic"})=>{this.ctx.beginPath(),this.ctx.font=`${p} ${this.cfg.fontFamily}`,this.ctx.fillStyle=f,this.ctx.textAlign=l,this.ctx.textBaseline=m,this.ctx.fillText(a,t,i)});_(this,ht,({startX:t,startY:i,endX:a,endY:f,bgColor:p})=>{this.ctx.beginPath(),this.ctx.rect(t,i,a-t,f-i),this.ctx.fillStyle=p,this.ctx.fill()});if(!t)throw new Error("canvas Element Or Element ID is required!");typeof t=="string"?this.$canvas=document.querySelector(t):this.$canvas=t,this.ctx=this.$canvas.getContext("2d"),this.cfg={...Gt,...i},i!=null&&i.pointColor&&(this.cfg.pointerColor=i.pointColor),i!=null&&i.pointWidth&&(this.cfg.pointerWidth=i.pointWidth);const{fill:a,width:f,height:p,zoom:l,timeSpacingList:m,scaleHeight:c,textColor:O,bgTextColor:Y}=this.cfg;if(Y||(this.cfg.bgTextColor=Jt(O,.18)),l<0||l>=m.length||l%1!==0)throw new Error(`zoom must be 0 ~ ${m.length-1}, and must be an integer`);if(a){const M=this.$canvas.parentElement;this.$canvasParent=M,this.$canvas.width=M.clientWidth,this.$canvas.height=M.clientHeight,new ResizeObserver(Ct(B(this,xt,Xt).bind(this),200)).observe(M)}else this.$canvas.width=f,this.$canvas.height=p;W(this,z,m[l]),c!=null&&c.long&&(c!=null&&c.short)?W(this,it,c):W(this,it,{long:this.$canvas.height/3,medium:this.$canvas.height/6,short:this.$canvas.height/10}),this.draw(),this.$canvas.addEventListener("wheel",B(this,pt,Pt).bind(this),{passive:!1}),this.$canvas.addEventListener("mousedown",B(this,vt,Wt).bind(this)),this.$canvas.addEventListener("touchstart",B(this,Mt,kt).bind(this),{passive:!1}),this.$canvas.addEventListener("touchmove",Ct(B(this,Tt,It).bind(this),1e3/this.cfg.fps),{passive:!1}),this.$canvas.addEventListener("touchend",B(this,Dt,Ut).bind(this))}draw({currentTime:t,areas:i,_privateFlag:a}={}){if(o(this,V)&&!a)return;let f=t||Date.now();f<this.cfg.minimumTime&&(f=this.cfg.minimumTime),f>this.cfg.maximumTime&&(f=this.cfg.maximumTime),W(this,X,f),W(this,J,i||[]);const p=this.$canvas.width/2,l=Math.ceil(this.$canvas.width/this.cfg.scaleSpacing),m=l*o(this,z),[c,O]=W(this,ut,[o(this,X)-m/2,o(this,X)+m/2]);W(this,K,m/this.$canvas.width),B(this,yt,At).call(this),o(this,ht).call(this,{startX:0,startY:0,endX:this.$canvas.width,endY:this.$canvas.height,bgColor:this.cfg.bgColor}),o(this,J).forEach(Y=>{const M=Y.startTime<=c?0:Math.round((Y.startTime-c)/o(this,K)),T=Y.endTime>=O?this.$canvas.width:Math.round((Y.endTime-c)/o(this,K));M<this.$canvas.width&&T>0&&o(this,ht).call(this,{startX:M,startY:0,endX:T,endY:this.$canvas.height,bgColor:Y.bgColor||this.cfg.areaBgColor})}),Vt.bind(this)({xCenterPoint:p,screenScaleCount:l,startTime:c,timePerPixel:o(this,K),scaleHeight:o(this,it),timeSpacing:o(this,z),currentTime:o(this,X),$canvas:this.$canvas,cfg:this.cfg,drawLine:o(this,Yt).bind(this),drawText:o(this,ft).bind(this),drawArea:o(this,ht).bind(this)}),B(this,St,Zt).call(this)}getCurrentTime(){return o(this,X)}getTimeRange(){return o(this,ut)}getMsPerPixel(){return o(this,K)}on(t,i){o(this,ot).on(t,i)}off(t,i){o(this,ot).off(t,i)}}return ut=new WeakMap,K=new WeakMap,ot=new WeakMap,X=new WeakMap,J=new WeakMap,z=new WeakMap,it=new WeakMap,V=new WeakMap,tt=new WeakMap,Q=new WeakMap,vt=new WeakSet,Wt=function(t){W(this,V,!0);let i=t.clientX,a=o(this,X);const f=Ct(({clientX:m})=>{o(this,V)&&(a=Math.round(o(this,X)-o(this,z)/this.cfg.scaleSpacing*(m-i)),i=m,this.draw({currentTime:a,areas:o(this,J),_privateFlag:!0}))},1e3/this.cfg.fps),p=m=>{const c=this.$canvas.getBoundingClientRect(),O=m.clientX-c.left,Y=m.clientY-c.top,M=3;(O<M||O>this.$canvas.width-M||Y<M||Y>this.$canvas.height-M)&&(this.$canvas.removeEventListener("mousemove",f),this.$canvas.removeEventListener("mousemove",p))},l=()=>{this.$canvas.removeEventListener("mousemove",f),this.$canvas.removeEventListener("mousemove",p),document.removeEventListener("mouseup",l),W(this,V,!1),B(this,st,$t).call(this,"dragged",a)};this.$canvas.addEventListener("mousemove",f),this.$canvas.addEventListener("mousemove",p),document.addEventListener("mouseup",l)},pt=new WeakSet,Pt=function(t){t.preventDefault();const i=this.cfg.timeSpacingList.findIndex(a=>a===o(this,z));t.deltaY<0&&i>0?(W(this,z,this.cfg.timeSpacingList[i-1]),this.draw({currentTime:o(this,X),areas:o(this,J),_privateFlag:!0}),B(this,st,$t).call(this,"zoom",i-1)):t.deltaY>0&&i<this.cfg.timeSpacingList.length-1&&(W(this,z,this.cfg.timeSpacingList[i+1]),this.draw({currentTime:o(this,X),areas:o(this,J),_privateFlag:!0}),B(this,st,$t).call(this,"zoom",i+1))},Mt=new WeakSet,kt=function(t){t.preventDefault(),W(this,V,!0),W(this,tt,t.touches[0].clientX),t.touches.length===2&&W(this,Q,_t(t.touches))},Tt=new WeakSet,It=function(t){if(t.preventDefault(),!o(this,V))return;if(t.touches.length===2&&o(this,Q)!==null){const p=_t(t.touches),l=Math.abs(o(this,Q)-p)>=35;if(!l)return;let m=this.cfg.timeSpacingList.findIndex(c=>c===o(this,z));if(p<o(this,Q)?m+=1:m-=1,m<0||m>this.cfg.timeSpacingList.length-1)return;W(this,z,this.cfg.timeSpacingList[m]),l&&W(this,Q,p),this.draw({currentTime:o(this,X),areas:o(this,J),_privateFlag:!0});return}if(o(this,tt)===null)return;const i=t.touches[0],a=i.clientX-o(this,tt),f=Math.round(o(this,X)-o(this,z)/this.cfg.scaleSpacing*a);W(this,tt,i.clientX),this.draw({currentTime:f,areas:o(this,J),_privateFlag:!0})},Dt=new WeakSet,Ut=function(t){o(this,V)&&(W(this,V,!1),W(this,tt,null),t.touches.length<2&&W(this,Q,null),B(this,st,$t).call(this,"dragged",o(this,X)))},xt=new WeakSet,Xt=function(){this.$canvasParent&&(this.$canvas.width=this.$canvasParent.clientWidth,this.$canvas.height=this.$canvasParent.clientHeight,this.cfg.scaleHeight||W(this,it,{long:this.$canvas.height/3,medium:this.$canvas.height/6,short:this.$canvas.height/10}),this.draw({currentTime:o(this,X),areas:o(this,J)}))},yt=new WeakSet,At=function(){this.ctx.clearRect(0,0,this.$canvas.width,this.$canvas.height)},St=new WeakSet,Zt=function(){const t=()=>o(this,z)<1e3?`${o(this,z)}ms`:o(this,z)<6e4?`${Math.round(o(this,z)/100)/10}sec`:o(this,z)<36e5?`${Math.round(o(this,z)/100/60)/10}min`:o(this,z)<864e5?`${Math.round(o(this,z)/100/60/60)/10}hours`:o(this,z)<6048e5?`${Math.round(o(this,z)/100/60/60/24)/10}days`:`${Math.round(o(this,z)/100/60/60/24/7)/10}weeks`;o(this,ft).call(this,{x:this.cfg.scaleSpacing+12,y:9,text:t(),align:"left",baseLine:"middle"}),this.ctx.beginPath(),this.ctx.moveTo(5,6),this.ctx.lineTo(5,10),this.ctx.lineTo(this.cfg.scaleSpacing+6,10),this.ctx.lineTo(this.cfg.scaleSpacing+6,6),this.ctx.strokeStyle=this.cfg.scaleColor,this.ctx.lineWidth=1.5,this.ctx.stroke()},Yt=new WeakMap,ft=new WeakMap,ht=new WeakMap,st=new WeakSet,$t=function(...t){o(this,ot).emit(...t)},S.default=Qt,S.format=gt,Object.defineProperties(S,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),S}({});
